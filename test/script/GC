#!/bin/sh

RESULT=`git diff . | grep "diff " | sed 's/diff --git a\///g' | sed 's/ b\/.*$//g'`

if [ -z "${RESULT}" ];then
	echo "no diff information"
	exit
fi

echo "commit list:"
echo "${RESULT}"

DATE=`date +%Y-%m-%d_%H%M%S`
for i in `git diff | grep "diff " | sed 's/diff --git a\///g' | sed 's/ b\/.*$//g'`;do
    git commit -m "GC update ${DATE}" $i
done

git push

